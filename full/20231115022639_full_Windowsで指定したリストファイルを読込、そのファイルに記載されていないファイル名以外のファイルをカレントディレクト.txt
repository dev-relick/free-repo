{ "id": "chatcmpl-8KztUIGv85mFlHiToa1mC4c1AH9VN", "object": "chat.completion", "created": 1700015172, "model": "gpt-4-1106-preview", "choices": [ { "index": 0, "message": { "role": "assistant", "content": "下記のバッチファイルは、指定したリストファイルに記載されていないファイルを再帰的に検索し削除し、その後空のディレクトリを検索し削除するスクリプトです。このバッチファイルを実行する前に、必ずバックアップを取るなどして、予期しないデータ損失を避けてください。\n\n```batch\n@echo off\nsetlocal enabledelayedexpansion\n\n:: リストファイル名をsetする（ファイルパスも適宜指定）\nset LISTFILE=keepfiles.txt\n\n:: カレントディレクトリからリストにないファイルを削除\nfor /r %%i in (*) do (\n set FILE=%%~nxi\n set KEEP=false\n for /f \"tokens=*\" %%j in (%LISTFILE%) do (\n if \"%%~nxi\"==\"%%j\" set KEEP=true\n )\n if not !KEEP! == true (\n echo Deleting: %%i\n del \"%%i\"\n )\n)\n\n:: 空のディレクトリを削除\nfor /d /r %%i in (*) do (\n dir /b \"%%i\" | findstr \"^\" >nul || (\n echo Removing empty directory: %%i\n rmdir \"%%i\"\n )\n)\n\necho Finished.\nendlocal\npause\n```\n\nバッチファイルの使い方：\n\n1. `keepfiles.txt` という名前のリストファイルを用意し、カレントディレクトリに置くか、適切なパスを `set LISTFILE=keepfiles.txt` の行に設定してください。\n2. リストファイルには、削除しないファイル名（拡張子込み）を行ごとに記載します。\n3. このバッチファイルを保存し、実行するディレクトリで実行します。\n4. スクリプトはまず、カレントディレクトリとそのサブディレクトリ内のすべてのファイルをスキャンし、リストファイルに記載されていないファイルを削除します。\n5. その後、空のディレクトリを探して削除します。\n\n注意事項：\n- 実行前には十分なテストを行い、データのバックアップを取ることを強く推奨します。\n- このスクリプトは非常に危険な操作を行います。削除操作は取り返しがつかないため、実行は自己責任でお願いします。\n- リストファイル内のファイル名は大文字小文字を区別しないものとして比較されます。また、完全なファイル名のみが対象となります（パスは含みません）。必要に応じてスクリプトを調整してください。" }, "finish_reason": "stop" } ], "usage": { "prompt_tokens": 124, "completion_tokens": 799, "total_tokens": 923 }, "system_fingerprint": "fp_a24b4d720c" }

{ "id": "chatcmpl-8L0K5yaMgJUUBO7ljsUnz2U5vdRY7", "object": "chat.completion", "created": 1700016821, "model": "gpt-4-1106-preview", "choices": [ { "index": 0, "message": { "role": "assistant", "content": "以下は指定したリストファイルに記載されていないファイルを削除し、その後空のフォルダを削除するバッチファイルの例です。\n\n```batch\n@echo off\nsetlocal EnableExtensions DisableDelayedExpansion\n\nrem リストファイルのパスをここに設定してください。\nset \"LIST_FILE=保持するファイルリスト.txt\"\n\nrem classesフォルダのパスをここに設定してください。\nset \"CLASSES_DIR=.\\classes\"\n\nif not exist \"%LIST_FILE%\" (\n echo リストファイルが見つかりません: %LIST_FILE%\n exit /b 1\n)\n\nif not exist \"%CLASSES_DIR%\" (\n echo 対象フォルダが見つかりません: %CLASSES_DIR%\n exit /b 1\n)\n\nrem リストファイルから除外リストを作成する\nset \"EXCLUDE_LIST=\"\nfor /F \"usebackq delims=\" %%F in (\"%LIST_FILE%\") do (\n set \"EXCLUDE_LIST=!EXCLUDE_LIST! \"%%F\"\"\n)\n\nrem 対象ディレクトリから削除対象のファイルを探す\nfor /R \"%CLASSES_DIR%\" %%I in (*) do (\n rem 現在のファイルが除外リストに含まれていなければ削除\n echo %%I | findstr /L /I /C:\"%%I\" >nul || (\n echo 削除: %%I\n del \"%%I\"\n )\n)\n\nrem 空のディレクトリを探して削除する\nfor /D /R \"%CLASSES_DIR%\" %%D in (*) do (\n dir \"%%D\" /b /a | findstr \"^\" >nul || (\n echo 空のフォルダを削除: %%D\n rmdir \"%%D\"\n )\n)\n\nendlocal\n```\n\nこのバッチファイルを使用する前に、`LIST_FILE`と`CLASSES_DIR`の変数を設定してください。\n\n- `LIST_FILE`は保持したいファイルのリストが記載されているファイルのパスです。\n- `CLASSES_DIR`はファイルをチェックする`classes`フォルダのパスです。\n\nこのスクリプトはリストファイルの内容に基づいてファイルを検索し、リストに存在しないファイルを削除します。その後、空のフォルダを検索して削除します。\n\n動作を始める前に、このスクリプトを実行することによるリスクをよく理解し、バックアップを取ることをお勧めします。スクリプトは危険な操作（削除操作）を含むためです。" }, "finish_reason": "stop" } ], "usage": { "prompt_tokens": 136, "completion_tokens": 719, "total_tokens": 855 }, "system_fingerprint": "fp_a24b4d720c" }

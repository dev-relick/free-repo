Oracleのexpコマンドでentry_d列が現在日付から3年前までのデータをエクスポートする。実行環境はWindows。expdpコマンドは使用しない。


`exp`コマンドはOracleの古いエクスポートユーティリティで、Oracle 11gからは`expdp`（Data Pump Export）に置き換えられましたが、旧バージョン環境ではまだ使用することがあります。

`exp`コマンドを使用して特定の条件でデータをエクスポートするには、`QUERY`パラメータを使用してSQL条件を指定します。このパラメータは、エクスポートするデータに対して`WHERE`句の条件を適用します。

現在日付から3年前までのデータをエクスポートするには、まず現在日付（SYSDATE）から3年分（36ヶ月）を引いた日付を計算し、その日付よりも新しいエントリを選択するクエリを作成する必要があります。

コマンド例（要調整）:

```bash
exp userid=username/password@database tables=your_table_name query="WHERE entry_d >= ADD_MONTHS(SYSDATE, -36)"
```

例では、username、password、database、your_table_nameを実際の環境に合わせて置き換えてください。

注意：

- `QUERY`パラメータの値はダブルクォーテーションで囲む必要があります。
- Windows環境では、コマンドプロンプトの特定の文字（例えば`%`）はエスケープが必要な場合があります。正しいエスケープを行ってください。
- SQL文内でシングルクォーテーションが必要な場合は、コマンドプロンプトでは二重にすることでエスケープできます（例: `query="WHERE entry_d >= ADD_MONTHS(SYSDATE, -36) AND name = 'John''s Data'"`）。
- 実行するときはOracleがインストールされているディレクトリにある`bin`フォルダー内にある`exp.exe`がコマンドプロンプトの実行パスに含まれているか、または完全なパスを指定する必要があります。

実行する前に、`exp`コマンドの使用方法がバージョンによって異なるためOracleのドキュメントを参照するか、`exp help=y`コマンドを使って利用可能なオプションを確認してください。また、`exp`コマンドは古いバージョンのOracleでのみ使用できますので、サポートが終了している可能性があることにも注意してください。
